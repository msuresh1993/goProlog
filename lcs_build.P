 :-table templcs4/4.
 templcs4( _h651, _h652, _h653, _h654) :- bagof([ _h736, _h738], lcs4( _h651, _h652, _h736, _h738), _h780), getfirst( _h780, _h788), max( _h788, _h807), mapans([ _h653, _h654], _h780, _h807).
 lcs( _h914, _h915, _h916, _h917) :- tables:get_returns_for_call( templcs4( _h914, _h915, _h916, _h917), templcs4( _h914, _h915, _h916, _h917)), !.
 lcs( _h1073, _h1074, _h1075, _h1076) :- templcs4( _h1073, _h1074, _h1075, _h1076).
 lcs( [], [], 0, []).
 lcs( [], _h1365, 0, []).
 lcs( _h1470, [], 0, []).
 lcs4([ _h1599|_h1617],[ _h1647|_h1665], _h1689,[ _h1599|_h1729]) :- _h1599 = _h1647, lcs( _h1617, _h1665, _h1835, _h1729), _h1689 is _h1835 + 1.
 lcs4([ _h2136|_h2154],[ _h2184|_h2202], _h2226, _h2244) :- _h2136 \= _h2184, lcs([ _h2136|_h2154], _h2202, _h2226, _h2244).
 lcs4([ _h2595|_h2613],[ _h2643|_h2661], _h2685, _h2703) :- _h2595 \= _h2643, lcs( _h2613,[ _h2643|_h2661], _h2685, _h2703).
